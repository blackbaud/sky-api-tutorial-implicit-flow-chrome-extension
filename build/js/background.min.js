!function a(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,a,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){var d,e,f;f=a("./Utils"),e=a("./Inline"),d=function(){function a(){}return a.indentation=4,a.prototype.dump=function(a,b,c,d,g){var h,i,j,k,l,m,n;if(null==b&&(b=0),null==c&&(c=0),null==d&&(d=!1),null==g&&(g=null),k="",l=c?f.strRepeat(" ",c):"",b<=0||"object"!=typeof a||a instanceof Date||f.isEmpty(a))k+=l+e.dump(a,d,g);else if(a instanceof Array)for(h=0,j=a.length;h<j;h++)m=a[h],n=b-1<=0||"object"!=typeof m||f.isEmpty(m),k+=l+"-"+(n?" ":"\n")+this.dump(m,b-1,n?0:c+this.indentation,d,g)+(n?"\n":"");else for(i in a)m=a[i],n=b-1<=0||"object"!=typeof m||f.isEmpty(m),k+=l+e.dump(i,d,g)+":"+(n?" ":"\n")+this.dump(m,b-1,n?0:c+this.indentation,d,g)+(n?"\n":"");return k},a}(),b.exports=d},{"./Inline":5,"./Utils":9}],2:[function(a,b,c){var d,e;e=a("./Pattern"),d=function(){function a(){}var b;return a.LIST_ESCAPEES=["\\","\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\x0B","\f","\r","","","","","","","","","","","","","","","","","","",(b=String.fromCharCode)(133),b(160),b(8232),b(8233)],a.LIST_ESCAPED=["\\\\",'\\"','\\"','\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],a.MAPPING_ESCAPEES_TO_ESCAPED=function(){var b,c,d,e;for(d={},b=c=0,e=a.LIST_ESCAPEES.length;0<=e?c<e:c>e;b=0<=e?++c:--c)d[a.LIST_ESCAPEES[b]]=a.LIST_ESCAPED[b];return d}(),a.PATTERN_CHARACTERS_TO_ESCAPE=new e("[\\x00-\\x1f]|Ã‚Â…|Ã‚Â |Ã¢Â€Â¨|Ã¢Â€Â©"),a.PATTERN_MAPPING_ESCAPEES=new e(a.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),a.PATTERN_SINGLE_QUOTING=new e("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),a.requiresDoubleQuoting=function(a){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(a)},a.escapeWithDoubleQuotes=function(a){var b;return b=this.PATTERN_MAPPING_ESCAPEES.replace(a,function(a){return function(b){return a.MAPPING_ESCAPEES_TO_ESCAPED[b]}}(this)),'"'+b+'"'},a.requiresSingleQuoting=function(a){return this.PATTERN_SINGLE_QUOTING.test(a)},a.escapeWithSingleQuotes=function(a){return"'"+a.replace(/'/g,"''")+"'"},a}(),b.exports=d},{"./Pattern":7}],3:[function(a,b,c){var d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;d=function(a){function b(a,b,c){this.message=a,this.parsedLine=b,this.snippet=c}return e(b,a),b.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<DumpException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<DumpException> "+this.message},b}(Error),b.exports=d},{}],4:[function(a,b,c){var d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;d=function(a){function b(a,b,c){this.message=a,this.parsedLine=b,this.snippet=c}return e(b,a),b.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message},b}(Error),b.exports=d},{}],5:[function(a,b,c){var d,e,f,g,h,i,j,k=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};h=a("./Pattern"),i=a("./Unescaper"),e=a("./Escaper"),j=a("./Utils"),g=a("./Exception/ParseException"),d=a("./Exception/DumpException"),f=function(){function a(){}return a.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",a.PATTERN_TRAILING_COMMENTS=new h("^\\s*#.*$"),a.PATTERN_QUOTED_SCALAR=new h("^"+a.REGEX_QUOTED_STRING),a.PATTERN_THOUSAND_NUMERIC_SCALAR=new h("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),a.PATTERN_SCALAR_BY_DELIMITERS={},a.settings={},a.configure=function(a,b){null==a&&(a=null),null==b&&(b=null),this.settings.exceptionOnInvalidType=a,this.settings.objectDecoder=b},a.parse=function(a,b,c){var d,e;if(null==b&&(b=!1),null==c&&(c=null),this.settings.exceptionOnInvalidType=b,this.settings.objectDecoder=c,null==a)return"";if(a=j.trim(a),0===a.length)return"";switch(d={exceptionOnInvalidType:b,objectDecoder:c,i:0},a.charAt(0)){case"[":e=this.parseSequence(a,d),++d.i;break;case"{":e=this.parseMapping(a,d),++d.i;break;default:e=this.parseScalar(a,null,['"',"'"],d)}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(a.slice(d.i),""))throw new g('Unexpected characters near "'+a.slice(d.i)+'".');return e},a.dump=function(a,b,c){var d,f,g;return null==b&&(b=!1),null==c&&(c=null),null==a?"null":(g=typeof a,"object"===g?a instanceof Date?a.toISOString():null!=c&&(f=c(a),"string"==typeof f||null!=f)?f:this.dumpObject(a):"boolean"===g?a?"true":"false":j.isDigits(a)?"string"===g?"'"+a+"'":String(parseInt(a)):j.isNumeric(a)?"string"===g?"'"+a+"'":String(parseFloat(a)):"number"===g?a===1/0?".Inf":a===-(1/0)?"-.Inf":isNaN(a)?".NaN":a:e.requiresDoubleQuoting(a)?e.escapeWithDoubleQuotes(a):e.requiresSingleQuoting(a)?e.escapeWithSingleQuotes(a):""===a?'""':j.PATTERN_DATE.test(a)?"'"+a+"'":"null"===(d=a.toLowerCase())||"~"===d||"true"===d||"false"===d?"'"+a+"'":a)},a.dumpObject=function(a,b,c){var d,e,f,g,h;if(null==c&&(c=null),a instanceof Array){for(g=[],d=0,f=a.length;d<f;d++)h=a[d],g.push(this.dump(h));return"["+g.join(", ")+"]"}g=[];for(e in a)h=a[e],g.push(this.dump(e)+": "+this.dump(h));return"{"+g.join(", ")+"}"},a.parseScalar=function(a,b,c,d,e){var f,i,l,m,n,o,p,q,r;if(null==b&&(b=null),null==c&&(c=['"',"'"]),null==d&&(d=null),null==e&&(e=!0),null==d&&(d={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),f=d.i,o=a.charAt(f),k.call(c,o)>=0){if(m=this.parseQuotedScalar(a,d),f=d.i,null!=b&&(r=j.ltrim(a.slice(f)," "),p=r.charAt(0),!(k.call(b,p)>=0)))throw new g("Unexpected characters ("+a.slice(f)+").")}else{if(b){if(i=b.join("|"),n=this.PATTERN_SCALAR_BY_DELIMITERS[i],null==n&&(n=new h("^(.+?)("+i+")"),this.PATTERN_SCALAR_BY_DELIMITERS[i]=n),!(l=n.exec(a.slice(f))))throw new g("Malformed inline YAML string ("+a+").");m=l[1],f+=m.length}else m=a.slice(f),f+=m.length,q=m.indexOf(" #"),q!==-1&&(m=j.rtrim(m.slice(0,q)));e&&(m=this.evaluateScalar(m,d))}return d.i=f,m},a.parseQuotedScalar=function(a,b){var c,d,e;if(c=b.i,!(d=this.PATTERN_QUOTED_SCALAR.exec(a.slice(c))))throw new g("Malformed inline YAML string ("+a.slice(c)+").");return e=d[0].substr(1,d[0].length-2),e='"'===a.charAt(c)?i.unescapeDoubleQuotedString(e):i.unescapeSingleQuotedString(e),c+=d[0].length,b.i=c,e},a.parseSequence=function(a,b){var c,d,e,f,h,i,j,k;for(i=[],h=a.length,e=b.i,e+=1;e<h;){switch(b.i=e,a.charAt(e)){case"[":i.push(this.parseSequence(a,b)),e=b.i;break;case"{":i.push(this.parseMapping(a,b)),e=b.i;break;case"]":return i;case",":case" ":case"\n":break;default:if(f='"'===(j=a.charAt(e))||"'"===j,k=this.parseScalar(a,[",","]"],['"',"'"],b),e=b.i,!f&&"string"==typeof k&&(k.indexOf(": ")!==-1||k.indexOf(":\n")!==-1))try{k=this.parseMapping("{"+k+"}")}catch(d){c=d}i.push(k),--e}++e}throw new g("Malformed inline YAML string "+a)},a.parseMapping=function(a,b){var c,d,e,f,h,i,j;for(h={},f=a.length,d=b.i,d+=1,i=!1;d<f;){switch(b.i=d,a.charAt(d)){case" ":case",":case"\n":++d,b.i=d,i=!0;break;case"}":return h}if(i)i=!1;else for(e=this.parseScalar(a,[":"," ","\n"],['"',"'"],b,!1),d=b.i,c=!1;d<f;){switch(b.i=d,a.charAt(d)){case"[":j=this.parseSequence(a,b),d=b.i,void 0===h[e]&&(h[e]=j),c=!0;break;case"{":j=this.parseMapping(a,b),d=b.i,void 0===h[e]&&(h[e]=j),c=!0;break;case":":case" ":case"\n":break;default:j=this.parseScalar(a,[",","}"],['"',"'"],b),d=b.i,void 0===h[e]&&(h[e]=j),c=!0,--d}if(++d,c)break}}throw new g("Malformed inline YAML string "+a)},a.evaluateScalar=function(a,b){var c,d,e,f,h,i,k,l,m,n,o;switch(a=j.trim(a),m=a.toLowerCase()){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":return 1/0;case".nan":return NaN;case"-.inf":return 1/0;default:switch(f=m.charAt(0)){case"!":switch(h=a.indexOf(" "),i=h===-1?m:m.slice(0,h)){case"!":return h!==-1?parseInt(this.parseScalar(a.slice(2))):null;case"!str":return j.ltrim(a.slice(4));case"!!str":return j.ltrim(a.slice(5));case"!!int":return parseInt(this.parseScalar(a.slice(5)));case"!!bool":return j.parseBoolean(this.parseScalar(a.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(a.slice(7)));case"!!timestamp":return j.stringToDate(j.ltrim(a.slice(11)));default:if(null==b&&(b={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),k=b.objectDecoder,e=b.exceptionOnInvalidType,k)return o=j.rtrim(a),h=o.indexOf(" "),h===-1?k(o,null):(n=j.ltrim(o.slice(h+1)),n.length>0||(n=null),k(o.slice(0,h),n));if(e)throw new g("Custom object support when parsing a YAML file has been disabled.");return null}break;case"0":return"0x"===a.slice(0,2)?j.hexDec(a):j.isDigits(a)?j.octDec(a):j.isNumeric(a)?parseFloat(a):a;case"+":return j.isDigits(a)?(l=a,c=parseInt(l),l===String(c)?c:l):j.isNumeric(a)?parseFloat(a):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(a)?parseFloat(a.replace(",","")):a;case"-":return j.isDigits(a.slice(1))?"0"===a.charAt(1)?-j.octDec(a.slice(1)):(l=a.slice(1),c=parseInt(l),l===String(c)?-c:-l):j.isNumeric(a)?parseFloat(a):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(a)?parseFloat(a.replace(",","")):a;default:return(d=j.stringToDate(a))?d:j.isNumeric(a)?parseFloat(a):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(a)?parseFloat(a.replace(",","")):a}}},a}(),b.exports=f},{"./Escaper":2,"./Exception/DumpException":3,"./Exception/ParseException":4,"./Pattern":7,"./Unescaper":8,"./Utils":9}],6:[function(a,b,c){var d,e,f,g,h;d=a("./Inline"),g=a("./Pattern"),h=a("./Utils"),e=a("./Exception/ParseException"),f=function(){function a(a){this.offset=null!=a?a:0,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}return a.prototype.PATTERN_FOLDED_SCALAR_ALL=new g("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),a.prototype.PATTERN_FOLDED_SCALAR_END=new g("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),a.prototype.PATTERN_SEQUENCE_ITEM=new g("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),a.prototype.PATTERN_ANCHOR_VALUE=new g("^&(?<ref>[^ ]+) *(?<value>.*)"),a.prototype.PATTERN_COMPACT_NOTATION=new g("^(?<key>"+d.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),a.prototype.PATTERN_MAPPING_ITEM=new g("^(?<key>"+d.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),a.prototype.PATTERN_DECIMAL=new g("\\d+"),a.prototype.PATTERN_INDENT_SPACES=new g("^ +"),a.prototype.PATTERN_TRAILING_LINES=new g("(\n*)$"),a.prototype.PATTERN_YAML_HEADER=new g("^\\%YAML[: ][\\d\\.]+.*\n"),a.prototype.PATTERN_LEADING_COMMENTS=new g("^(\\#.*?\n)+"),a.prototype.PATTERN_DOCUMENT_MARKER_START=new g("^\\-\\-\\-.*?\n"),a.prototype.PATTERN_DOCUMENT_MARKER_END=new g("^\\.\\.\\.\\s*$"),a.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},a.prototype.CONTEXT_NONE=0,a.prototype.CONTEXT_SEQUENCE=1,a.prototype.CONTEXT_MAPPING=2,a.prototype.parse=function(b,c,f){var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;for(null==c&&(c=!1),null==f&&(f=null),this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(b).split("\n"),m=null,l=this.CONTEXT_NONE,i=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"===this.currentLine[0])throw new e("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(u=H=!1,T=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===l)throw new e("You cannot define a sequence item when in a mapping");l=this.CONTEXT_SEQUENCE,null==m&&(m=[]),null!=T.value&&(G=this.PATTERN_ANCHOR_VALUE.exec(T.value))&&(u=G.ref,T.value=G.value),null==T.value||""===h.trim(T.value," ")||0===h.ltrim(T.value," ").indexOf("#")?this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?(k=this.getRealCurrentLineNb()+1,M=new a(k),M.refs=this.refs,m.push(M.parse(this.getNextEmbedBlock(null,!0),c,f))):m.push(null):(null!=(N=T.leadspaces)?N.length:void 0)&&(G=this.PATTERN_COMPACT_NOTATION.exec(T.value))?(k=this.getRealCurrentLineNb(),M=new a(k),M.refs=this.refs,j=T.value,t=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(j+="\n"+this.getNextEmbedBlock(t+T.leadspaces.length+1,!0)),m.push(M.parse(j,c,f))):m.push(this.parseValue(T.value,c,f))}else{if(!(T=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))||T.key.indexOf(" #")!==-1){if(E=this.lines.length,1===E||2===E&&h.isEmpty(this.lines[1])){try{b=d.parse(this.lines[0],c,f)}catch(p){throw n=p,n.parsedLine=this.getRealCurrentLineNb()+1,n.snippet=this.currentLine,n}if("object"==typeof b){if(b instanceof Array)r=b[0];else for(x in b){r=b[x];break}if("string"==typeof r&&0===r.indexOf("*")){for(m=[],I=0,D=b.length;I<D;I++)g=b[I],m.push(this.refs[g.slice(1)]);b=m}}return b}if("["===(P=h.ltrim(b).charAt(0))||"{"===P)try{return d.parse(b,c,f)}catch(q){throw n=q,n.parsedLine=this.getRealCurrentLineNb()+1,n.snippet=this.currentLine,n}throw new e("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(this.CONTEXT_SEQUENCE===l)throw new e("You cannot define a mapping item when in a sequence");l=this.CONTEXT_MAPPING,null==m&&(m={}),d.configure(c,f);try{x=d.parseScalar(T.key)}catch(o){throw n=o,n.parsedLine=this.getRealCurrentLineNb()+1,n.snippet=this.currentLine,n}if("<<"===x)if(H=!0,i=!0,0===(null!=(O=T.value)?O.indexOf("*"):void 0)){if(Q=T.value.slice(1),null==this.refs[Q])throw new e('Reference "'+Q+'" does not exist.',this.getRealCurrentLineNb()+1,this.currentLine);if(R=this.refs[Q],"object"!=typeof R)throw new e("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(R instanceof Array)for(s=v=0,A=R.length;v<A;s=++v)b=R[s],null==m[J=String(s)]&&(m[J]=b);else for(x in R)b=R[x],null==m[x]&&(m[x]=b)}else{if(b=null!=T.value&&""!==T.value?T.value:this.getNextEmbedBlock(),k=this.getRealCurrentLineNb()+1,M=new a(k),M.refs=this.refs,K=M.parse(b,c),"object"!=typeof K)throw new e("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(K instanceof Array)for(y=0,B=K.length;y<B;y++){if(L=K[y],"object"!=typeof L)throw new e("Merge items must be objects.",this.getRealCurrentLineNb()+1,L);if(L instanceof Array)for(s=F=0,C=L.length;F<C;s=++F)b=L[s],w=String(s),m.hasOwnProperty(w)||(m[w]=b);else for(x in L)b=L[x],m.hasOwnProperty(x)||(m[x]=b)}else for(x in K)b=K[x],m.hasOwnProperty(x)||(m[x]=b)}else null!=T.value&&(G=this.PATTERN_ANCHOR_VALUE.exec(T.value))&&(u=G.ref,T.value=G.value);H||(null==T.value||""===h.trim(T.value," ")||0===h.ltrim(T.value," ").indexOf("#")?this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?(k=this.getRealCurrentLineNb()+1,M=new a(k),M.refs=this.refs,S=M.parse(this.getNextEmbedBlock(),c,f),(i||void 0===m[x])&&(m[x]=S)):(i||void 0===m[x])&&(m[x]=null):(S=this.parseValue(T.value,c,f),(i||void 0===m[x])&&(m[x]=S)))}if(u)if(m instanceof Array)this.refs[u]=m[m.length-1];else{z=null;for(x in m)z=x;this.refs[u]=m[z]}}return h.isEmpty(m)?null:m},a.prototype.getRealCurrentLineNb=function(){return this.currentLineNb+this.offset},a.prototype.getCurrentLineIndentation=function(){return this.currentLine.length-h.ltrim(this.currentLine," ").length},a.prototype.getNextEmbedBlock=function(a,b){var c,d,f,g,i,j,k;if(null==a&&(a=null),null==b&&(b=!1),this.moveToNextLine(),null==a){if(g=this.getCurrentLineIndentation(),k=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===g&&!k)throw new e("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}else g=a;for(c=[this.currentLine.slice(g)],b||(f=this.isStringUnIndentedCollectionItem(this.currentLine)),j=this.PATTERN_FOLDED_SCALAR_END,i=!j.test(this.currentLine);this.moveToNextLine();){if(d=this.getCurrentLineIndentation(),d===g&&(i=!j.test(this.currentLine)),f&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&d===g){this.moveToPreviousLine();break}if(this.isCurrentLineBlank())c.push(this.currentLine.slice(g));else if(!i||!this.isCurrentLineComment()||d!==g)if(d>=g)c.push(this.currentLine.slice(g));else if("#"!==h.ltrim(this.currentLine).charAt(0)){if(0===d){this.moveToPreviousLine();break}throw new e("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}}return c.join("\n")},a.prototype.moveToNextLine=function(){return!(this.currentLineNb>=this.lines.length-1)&&(this.currentLine=this.lines[++this.currentLineNb],!0)},a.prototype.moveToPreviousLine=function(){this.currentLine=this.lines[--this.currentLineNb]},a.prototype.parseValue=function(a,b,c){var f,g,h,i,j,k,l,m,n,o;if(0===a.indexOf("*")){if(l=a.indexOf("#"),a=l!==-1?a.substr(1,l-2):a.slice(1),void 0===this.refs[a])throw new e('Reference "'+a+'" does not exist.',this.currentLine);return this.refs[a]}if(j=this.PATTERN_FOLDED_SCALAR_ALL.exec(a))return k=null!=(m=j.modifiers)?m:"",i=Math.abs(parseInt(k)),isNaN(i)&&(i=0),o=this.parseFoldedScalar(j.separator,this.PATTERN_DECIMAL.replace(k,""),i),null!=j.type?(d.configure(b,c),d.parseScalar(j.type+" "+o)):o;try{return d.parse(a,b,c)}catch(g){if(f=g,"["!==(n=a.charAt(0))&&"{"!==n||!(f instanceof e)||!this.isNextLineIndented())throw f.parsedLine=this.getRealCurrentLineNb()+1,f.snippet=this.currentLine,f;a+="\n"+this.getNextEmbedBlock();try{return d.parse(a,b,c)}catch(h){throw f=h,f.parsedLine=this.getRealCurrentLineNb()+1,f.snippet=this.currentLine,f}}},a.prototype.parseFoldedScalar=function(b,c,d){var e,f,i,j,k,l,m,n,o,p;if(null==c&&(c=""),null==d&&(d=0),m=this.moveToNextLine(),!m)return"";for(e=this.isCurrentLineBlank(),p="";m&&e;)(m=this.moveToNextLine())&&(p+="\n",e=this.isCurrentLineBlank());if(0===d&&(k=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(d=k[0].length),d>0)for(n=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[d],null==n&&(n=new g("^ {"+d+"}(.*)$"),a.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[d]=n);m&&(e||(k=n.exec(this.currentLine)));)p+=e?this.currentLine.slice(d):k[1],(m=this.moveToNextLine())&&(p+="\n",e=this.isCurrentLineBlank());else m&&(p+="\n");if(m&&this.moveToPreviousLine(),">"===b){for(l="",o=p.split("\n"),f=0,i=o.length;f<i;f++)j=o[f],0===j.length||" "===j.charAt(0)?l=h.rtrim(l," ")+j+"\n":l+=j+" ";p=l}return"+"!==c&&(p=h.rtrim(p)),""===c?p=this.PATTERN_TRAILING_LINES.replace(p,"\n"):"-"===c&&(p=this.PATTERN_TRAILING_LINES.replace(p,"")),p},a.prototype.isNextLineIndented=function(a){var b,c,d;if(null==a&&(a=!0),c=this.getCurrentLineIndentation(),b=!this.moveToNextLine(),a)for(;!b&&this.isCurrentLineEmpty();)b=!this.moveToNextLine();else for(;!b&&this.isCurrentLineBlank();)b=!this.moveToNextLine();return!b&&(d=!1,this.getCurrentLineIndentation()>c&&(d=!0),this.moveToPreviousLine(),d)},a.prototype.isCurrentLineEmpty=function(){var a;return a=h.trim(this.currentLine," "),0===a.length||"#"===a.charAt(0)},a.prototype.isCurrentLineBlank=function(){return""===h.trim(this.currentLine," ")},a.prototype.isCurrentLineComment=function(){var a;return a=h.ltrim(this.currentLine," "),"#"===a.charAt(0)},a.prototype.cleanup=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,p;for(a.indexOf("\r")!==-1&&(a=a.split("\r\n").join("\n").split("\r").join("\n")),b=0,l=this.PATTERN_YAML_HEADER.replaceAll(a,""),a=l[0],b=l[1],this.offset+=b,m=this.PATTERN_LEADING_COMMENTS.replaceAll(a,"",1),p=m[0],b=m[1],1===b&&(this.offset+=h.subStrCount(a,"\n")-h.subStrCount(p,"\n"),a=p),n=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(a,"",1),p=n[0],b=n[1],1===b&&(this.offset+=h.subStrCount(a,"\n")-h.subStrCount(p,"\n"),a=p,a=this.PATTERN_DOCUMENT_MARKER_END.replace(a,"")),k=a.split("\n"),o=-1,e=0,g=k.length;e<g;e++)j=k[e],0!==h.trim(j," ").length&&(d=j.length-h.ltrim(j).length,(o===-1||d<o)&&(o=d));if(o>0){for(c=f=0,i=k.length;f<i;c=++f)j=k[c],k[c]=j.slice(o);a=k.join("\n")}return a},a.prototype.isNextLineUnIndentedCollection=function(a){var b,c;for(null==a&&(a=null),null==a&&(a=this.getCurrentLineIndentation()),b=this.moveToNextLine();b&&this.isCurrentLineEmpty();)b=this.moveToNextLine();return!1!==b&&(c=!1,this.getCurrentLineIndentation()===a&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(c=!0),this.moveToPreviousLine(),c)},a.prototype.isStringUnIndentedCollectionItem=function(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)},a}(),b.exports=f},{"./Exception/ParseException":4,"./Inline":5,"./Pattern":7,"./Utils":9}],7:[function(a,b,c){var d;d=function(){function a(a,b){var c,d,e,f,g,h,i,j,k;for(null==b&&(b=""),e="",g=a.length,h=null,d=0,f=0;f<g;){if(c=a.charAt(f),"\\"===c)e+=a.slice(f,+(f+1)+1||9e9),f++;else if("("===c)if(f<g-2)if(j=a.slice(f,+(f+2)+1||9e9),"(?:"===j)f+=2,e+=j;else if("(?<"===j)for(d++,f+=2,i="";f+1<g;){if(k=a.charAt(f+1),">"===k){e+="(",f++,i.length>0&&(null==h&&(h={}),h[i]=d);break}i+=k,f++}else e+=c,d++;else e+=c;else e+=c;f++}this.rawRegex=a,this.cleanedRegex=e,this.regex=new RegExp(this.cleanedRegex,"g"+b.replace("g","")),this.mapping=h}return a.prototype.regex=null,a.prototype.rawRegex=null,a.prototype.cleanedRegex=null,a.prototype.mapping=null,a.prototype.exec=function(a){var b,c,d,e;if(this.regex.lastIndex=0,c=this.regex.exec(a),null==c)return null;if(null!=this.mapping){e=this.mapping;for(d in e)b=e[d],c[d]=c[b]}return c},a.prototype.test=function(a){return this.regex.lastIndex=0,this.regex.test(a)},a.prototype.replace=function(a,b){return this.regex.lastIndex=0,a.replace(this.regex,b)},a.prototype.replaceAll=function(a,b,c){var d;for(null==c&&(c=0),this.regex.lastIndex=0,d=0;this.regex.test(a)&&(0===c||d<c);)this.regex.lastIndex=0,a=a.replace(this.regex,""),d++;return[a,d]},a}(),b.exports=d},{}],8:[function(a,b,c){var d,e,f;f=a("./Utils"),d=a("./Pattern"),e=function(){function a(){}return a.PATTERN_ESCAPED_CHARACTER=new d('\\\\([0abt\tnvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})'),a.unescapeSingleQuotedString=function(a){return a.replace(/\'\'/g,"'")},a.unescapeDoubleQuotedString=function(a){return null==this._unescapeCallback&&(this._unescapeCallback=function(a){return function(b){return a.unescapeCharacter(b)}}(this)),this.PATTERN_ESCAPED_CHARACTER.replace(a,this._unescapeCallback)},a.unescapeCharacter=function(a){var b;switch(b=String.fromCharCode,a.charAt(1)){case"0":return b(0);case"a":return b(7);case"b":return b(8);case"t":return"\t";case"\t":return"\t";case"n":return"\n";case"v":return b(11);case"f":return b(12);case"r":return b(13);case"e":return b(27);case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return b(133);case"_":return b(160);case"L":return b(8232);case"P":return b(8233);case"x":return f.utf8chr(f.hexDec(a.substr(2,2)));case"u":return f.utf8chr(f.hexDec(a.substr(2,4)));case"U":return f.utf8chr(f.hexDec(a.substr(2,8)));default:return""}},a}(),b.exports=e},{"./Pattern":7,"./Utils":9}],9:[function(a,b,c){var d,e;d=a("./Pattern"),e=function(){function b(){}return b.REGEX_LEFT_TRIM_BY_CHAR={},b.REGEX_RIGHT_TRIM_BY_CHAR={},b.REGEX_SPACES=/\s+/g,b.REGEX_DIGITS=/^\d+$/,b.REGEX_OCTAL=/[^0-7]/gi,b.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,b.PATTERN_DATE=new d("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ \t]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ \t]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),b.LOCAL_TIMEZONE_OFFSET=60*(new Date).getTimezoneOffset()*1e3,b.trim=function(a,b){return null==b&&(b="\\s"),a.trim()},b.ltrim=function(a,b){var c;return null==b&&(b="\\s"),c=this.REGEX_LEFT_TRIM_BY_CHAR[b],null==c&&(this.REGEX_LEFT_TRIM_BY_CHAR[b]=c=new RegExp("^"+b+b+"*")),c.lastIndex=0,a.replace(c,"")},b.rtrim=function(a,b){var c;return null==b&&(b="\\s"),c=this.REGEX_RIGHT_TRIM_BY_CHAR[b],null==c&&(this.REGEX_RIGHT_TRIM_BY_CHAR[b]=c=new RegExp(b+""+b+"*$")),c.lastIndex=0,a.replace(c,"")},b.isEmpty=function(a){return!a||""===a||"0"===a||a instanceof Array&&0===a.length},b.subStrCount=function(a,b,c,d){var e,f,g,h,i,j;for(e=0,a=""+a,b=""+b,null!=c&&(a=a.slice(c)),null!=d&&(a=a.slice(0,d)),h=a.length,j=b.length,f=g=0,i=h;0<=i?g<i:g>i;f=0<=i?++g:--g)b===a.slice(f,j)&&(e++,f+=j-1);return e},b.isDigits=function(a){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(a)},b.octDec=function(a){return this.REGEX_OCTAL.lastIndex=0,parseInt((a+"").replace(this.REGEX_OCTAL,""),8)},b.hexDec=function(a){return this.REGEX_HEXADECIMAL.lastIndex=0,a=this.trim(a),"0x"===(a+"").slice(0,2)&&(a=(a+"").slice(2)),parseInt((a+"").replace(this.REGEX_HEXADECIMAL,""),16)},b.utf8chr=function(a){var b;return b=String.fromCharCode,128>(a%=2097152)?b(a):2048>a?b(192|a>>6)+b(128|63&a):65536>a?b(224|a>>12)+b(128|a>>6&63)+b(128|63&a):b(240|a>>18)+b(128|a>>12&63)+b(128|a>>6&63)+b(128|63&a)},b.parseBoolean=function(a,b){var c;return null==b&&(b=!0),"string"==typeof a?(c=a.toLowerCase(),!(!b&&"no"===c)&&("0"!==c&&("false"!==c&&""!==c))):!!a},b.isNumeric=function(a){return this.REGEX_SPACES.lastIndex=0,"number"==typeof a||"string"==typeof a&&!isNaN(a)&&""!==a.replace(this.REGEX_SPACES,"")},b.stringToDate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(!(null!=a?a.length:void 0))return null;if(f=this.PATTERN_DATE.exec(a),!f)return null;if(m=parseInt(f.year,10),h=parseInt(f.month,10)-1,c=parseInt(f.day,10),null==f.hour)return b=new Date(Date.UTC(m,h,c));if(e=parseInt(f.hour,10),g=parseInt(f.minute,10),i=parseInt(f.second,10),null!=f.fraction){for(d=f.fraction.slice(0,3);d.length<3;)d+="0";d=parseInt(d,10)}else d=0;return null!=f.tz&&(j=parseInt(f.tz_hour,10),k=null!=f.tz_minute?parseInt(f.tz_minute,10):0,l=6e4*(60*j+k),"-"===f.tz_sign&&(l*=-1)),b=new Date(Date.UTC(m,h,c,e,g,i,d)),l&&b.setTime(b.getTime()+l),b},b.strRepeat=function(a,b){var c,d;for(d="",c=0;c<b;)d+=a,c++;return d},b.getStringFromFile=function(b,c){var d,e,f,g,h,i,j,k;if(null==c&&(c=null),k=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)k=new XMLHttpRequest;else if(window.ActiveXObject)for(i=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],f=0,g=i.length;f<g;f++){h=i[f];try{k=new ActiveXObject(h)}catch(l){}}return null!=k?null!=c?(k.onreadystatechange=function(){if(4===k.readyState)return c(200===k.status||0===k.status?k.responseText:null)},k.open("GET",b,!0),k.send(null)):(k.open("GET",b,!1),k.send(null),200===k.status||0===k.status?k.responseText:null):(j=a,e=j("fs"),null!=c?e.readFile(b,function(a,b){return c(a?null:String(b))}):(d=e.readFileSync(b),null!=d?String(d):null))},b}(),b.exports=e},{"./Pattern":7}],10:[function(a,b,c){var d,e,f,g;e=a("./Parser"),d=a("./Dumper"),f=a("./Utils"),g=function(){function b(){}return b.parse=function(a,b,c){return null==b&&(b=!1),null==c&&(c=null),(new e).parse(a,b,c)},b.parseFile=function(a,b,c,d){var e;return null==b&&(b=null),null==c&&(c=!1),null==d&&(d=null),null!=b?f.getStringFromFile(a,function(a){return function(e){var f;f=null,null!=e&&(f=a.parse(e,c,d)),b(f)}}(this)):(e=f.getStringFromFile(a),null!=e?this.parse(e,c,d):null)},b.dump=function(a,b,c,e,f){var g;return null==b&&(b=2),null==c&&(c=4),null==e&&(e=!1),null==f&&(f=null),g=new d,g.indentation=c,g.dump(a,b,0,e,f)},b.register=function(){var b;if(b=function(a,b){return a.exports=YAML.parseFile(b)},null!=("undefined"!=typeof a&&null!==a?a.extensions:void 0))return a.extensions[".yml"]=b,a.extensions[".yaml"]=b},b.stringify=function(a,b,c,d,e){return this.dump(a,b,c,d,e)},b.load=function(a,b,c,d){return this.parseFile(a,b,c,d)},b}(),"undefined"!=typeof window&&null!==window&&(window.YAML=g),"undefined"!=typeof window&&null!==window||(this.YAML=g),b.exports=g},{"./Dumper":1,"./Parser":6,"./Utils":9}]},{},[10]),function(){"use strict";function a(){return new Promise(function(a,c){h.access_token?a(h):b().then(a)["catch"](c)})}function b(){return new Promise(function(a,b){var c;c=g.AUTH_SERVICE_BASE_URI+"authorization?client_id="+g.SKY_API_APP_ID+"&response_type=token&redirect_uri="+chrome.identity.getRedirectURL("oauth2"),chrome.identity.launchWebAuthFlow({url:c,interactive:!0},function(c){return chrome.runtime.lastError?(console.log(chrome.runtime.lastError.message+" Is your SKY API Application redirect URI set to "+chrome.identity.getRedirectURL("oauth2")+"?"),b({error:chrome.runtime.lastError.message+" Check the Background Page console for more info."})):(h=d("?"+c.split("#")[1]),void a(h))})})}function c(a){return new Promise(function(b,c){e("GET","https://api.sky.blackbaud.com/constituent/v1/constituents/search",{search_text:a},{"bb-api-subscription-key":g.SKY_API_SUBSCRIPTION_KEY,Authorization:"Bearer "+h.access_token}).then(b)["catch"](c)})}function d(a){var b;return b={},a?(a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,c,d){b[c]=d}),b):b}function e(a,b,c,d){return $.ajax({method:a||"GET",url:b,data:c,headers:d})}function f(d,f,h){var i,j;switch(j=function(a){if("string"==typeof a)return h({error:a});console.log("MESSAGE ERROR:",JSON.stringify(a));try{a=a.message||a.error||a.responseJSON.message||JSON.parse(a.responseText)}catch(b){a="Something bad happened. Please reload the page and try again."}return h({error:a})},d.type){case"apiSearch":console.log("Attempting to find constituent record via email address..."),i=d.message.emailAddress,a().then(function(){c(i).then(function(a){console.log("getConstituentByEmailAddress response:",a),a.responseText&&401===a.responseText.statusCode?(console.log("Token has expired."),b().then(function(){c(i).then(h)["catch"](j)})["catch"](j)):(console.log("Token valid. Passing data:",a),h(a))})["catch"](j)})["catch"](j);break;case"getConfig":console.log("Retrieving configuration from YAML file..."),e("GET",chrome.runtime.getURL("config.yml")).then(function(a){g=YAML.parse(a),console.log("Config defined as:",g),h(g)});break;case"getConstituentDetailTemplate":console.log("Loading HTML template for constituent detail..."),e("GET",chrome.runtime.getURL("src/templates/constituent-detail.html")).then(h);break;default:console.log("Unrecognized request to background script."),h({error:"Invalid message type."})}return!0}var g,h;h={},chrome.runtime.onMessage.addListener(f)}();
//# sourceMappingURL=background.min.js.map